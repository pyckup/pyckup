

Fri Sep  6 17:54:56 2024
Command line: TestDisk

TestDisk 7.1, Data Recovery Utility, July 2019
Christophe GRENIER <grenier@cgsecurity.org>
https://www.cgsecurity.org
OS: Linux, kernel 6.8.0-1013-aws (#14-Ubuntu SMP Thu Jul 25 21:19:24 UTC 2024) x86_64
Compiler: GCC 13.2
ext2fs lib: 1.47.0, ntfs lib: libntfs-3g, reiserfs lib: none, ewf lib: none, curses lib: ncurses 6.4
Warning: can't get size for Disk /dev/mapper/control - 0 B - 0 sectors, sector size=512
Warning: can't get size for Disk /dev/loop3 - 0 B - 0 sectors, sector size=512
Warning: can't get size for Disk /dev/loop4 - 0 B - 0 sectors, sector size=512
Warning: can't get size for Disk /dev/loop5 - 0 B - 0 sectors, sector size=512
Warning: can't get size for Disk /dev/loop6 - 0 B - 0 sectors, sector size=512
Warning: can't get size for Disk /dev/loop7 - 0 B - 0 sectors, sector size=512
Hard disk list
Disk /dev/loop0 - 26 MB / 25 MiB - 51688 sectors (RO), sector size=512
Disk /dev/loop1 - 40 MB / 38 MiB - 79520 sectors (RO), sector size=512
Disk /dev/loop2 - 58 MB / 55 MiB - 113992 sectors (RO), sector size=512
Disk /dev/nvme0n1 - 32 GB / 30 GiB - CHS 30720 64 32, sector size=512

Partition table type (auto): EFI GPT
Disk /dev/nvme0n1 - 32 GB / 30 GiB
Partition table type: Intel

Interface Advanced
Geometry from i386 MBR: head=256 sector=63
check_part_i386 1 type EE: no test
 1 P EFI GPT                  0   0  2 30719  63 32   62914559
Incomplete image created.

Interface Advanced
Geometry from i386 MBR: head=256 sector=63
check_part_i386 1 type EE: no test
 1 P EFI GPT                  0   0  2 30719  63 32   62914559
Change partition type:
 1 P EFI GPT                  0   0  2 30719  63 32   62914559

Analyse Disk /dev/nvme0n1 - 32 GB / 30 GiB - CHS 30720 64 32
Geometry from i386 MBR: head=256 sector=63
check_part_i386 1 type EE: no test
Current partition structure:
 1 P EFI GPT                  0   0  2 30719  63 32   62914559

Warning: Bad ending sector (CHS and LBA don't match)
No partition is bootable

search_part()
Disk /dev/nvme0n1 - 32 GB / 30 GiB - CHS 30720 64 32
FAT32 at 5/0/1
FAT1 : 32-1701
FAT2 : 1702-3371
start_rootdir : 3372 root cluster : 2
Data : 3372-217034
sectors : 217035
cluster_size : 1
no_of_cluster : 213663 (2 - 213664)
fat_length 1670 calculated 1670
heads/cylinder 128 (FAT) != 64 (HD)
sect/track 63 (FAT) != 32 (HD)

FAT32 at 5/0/1
FAT: cluster=2(0x2), pos=13612
     FAT32                    5   0  1   110  62 11     217035 [EFI System Partition] [UEFI]
     FAT32, blocksize=512, 111 MB / 105 MiB

recover_EXT2: s_block_group_nr=0/7, s_mnt_count=14/4294967295, s_blocks_per_group=32768, s_inodes_per_group=7312
recover_EXT2: s_blocksize=4096
recover_EXT2: s_blocks_count 233728
recover_EXT2: part_size 1869824
Filesystem created: Mon Jul  1 16:03:21 2024
Last mount time:    Fri Sep  6 15:18:15 2024
     Linux                  111   0  1  1023  63 32    1869824 [BOOT]
     ext4 blocksize=4096 Large_file Sparse_SB Recover, 957 MB / 913 MiB

recover_EXT2: s_block_group_nr=0/231, s_mnt_count=10/4294967295, s_blocks_per_group=32768, s_inodes_per_group=16384
recover_EXT2: s_blocksize=4096
recover_EXT2: s_blocks_count 7601915
recover_EXT2: part_size 60815320
Filesystem created: Mon Jul  1 16:03:06 2024
Last mount time:    Fri Sep  6 15:18:14 2024
     Linux                 1025   0  1 30719  62 24   60815320 [cloudimg-rootfs]
     ext4 blocksize=4096 Large_file Sparse_SB Recover, 31 GB / 28 GiB
get_geometry_from_list_part_aux head=64 nbr=4
get_geometry_from_list_part_aux head=8 nbr=4
get_geometry_from_list_part_aux head=16 nbr=4
get_geometry_from_list_part_aux head=32 nbr=4
get_geometry_from_list_part_aux head=64 nbr=4

Results
   * FAT32                    5   0  1   110  63 32     217088 [EFI System Partition] [UEFI]
     FAT32, blocksize=512, 111 MB / 106 MiB
   P Linux                  111   0  1  1023  63 32    1869824 [BOOT]
     ext4 blocksize=4096 Large_file Sparse_SB Recover, 957 MB / 913 MiB
   P Linux                 1025   0  1 30719  63 32   60815360 [cloudimg-rootfs]
     ext4 blocksize=4096 Large_file Sparse_SB Recover, 31 GB / 28 GiB

Hint for advanced users: dmsetup may be used if you prefer to avoid rewriting the partition table for the moment:
echo "0 217088 linear /dev/nvme0n1 10240" | dmsetup create test0
echo "0 1869824 linear /dev/nvme0n1 227328" | dmsetup create test1
echo "0 60815360 linear /dev/nvme0n1 2099200" | dmsetup create test2

interface_write()
 1 * FAT32                    5   0  1   110  63 32     217088 [EFI System Partition] [UEFI]
 2 P Linux                  111   0  1  1023  63 32    1869824 [BOOT]
 3 P Linux                 1025   0  1 30719  63 32   60815360 [cloudimg-rootfs]
simulate write!

write_mbr_i386: starting...
write_all_log_i386: starting...
No extended partition

Interface Advanced
Geometry from i386 MBR: head=256 sector=63
check_part_i386 1 type EE: no test
 1 P EFI GPT                  0   0  2 30719  63 32   62914559

Interface Advanced
Geometry from i386 MBR: head=256 sector=63
check_part_i386 1 type EE: no test
 1 P EFI GPT                  0   0  2 30719  63 32   62914559

TestDisk exited normally.
